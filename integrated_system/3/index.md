# Лекция 2
Почти все современные процессоры являются системами на кристалле
OoOE - out of order execution

зависимость от внешних инструкций процессор разрешает выполнять одну или несколько инструкций
Arm Cortex A - OoOE процессоры с внеочередным выполнением

## VLIW (Very long instruction word )

постепенно отмирающее направление
Примеры из семейства процессоров: c6x DSP от TI, Эльбрус

фактически суперскаляры с динамически подгружаемыми инструкциями
длина блока инструкции собирается в максимально возможные для текущего процессора по размеру блоки

VLIW медленее из-за:
- зависимости данных
- невозможности оценить в процессе выполнения

Каждый этап конвейера выполняется не за 1, а за несколько тактов в многогерцовых процессорах
Чем глуюже этап конвейера, тем он более подвержен возможности ошибки в ветвлении и сбросе


## CISС & RISС

- Complex instruction set computer
- Reduced instruction set computer

Идея RISC в протом наборе инструкций для декодирования
В случае CISC одна инструкция реализует расширеный набор (загрузка, сложение и тд)

### Задача сброса битов в регистре управления таймером
Для остановке таймера (MSP430)
- CISC

bic.w \#MC0|MC1, &TACTL // 3 слова, 5 тактов

- RISC

cad.w \#TACTL, R4       // 2 слова, 2 такта
load.w @R4,R5           // 1 слово, 2 такта
load.w \#MC0|MC1, R6    // 2 слова, 1 такт
bic.w R6,R5             // 2 слова, 2 такта
store.w R5,@R4          // 1 слово, 2 такта

В RISC разделены инструкции загрузки и сохранения с инструкциями обработки (load/store arch)

## Аппаратные интерфейсы

Типы интерфейсов:

- Внутрисистемные: I2C, SPI
    Предназначены для передачи сигналов между элементами одной платы
- Системные: PCI, PCI Express
- Периферийные: UART, USB
- Межсистемные: Ethernet, Bluetooth

По назначению:
- Организация (физическая / лоигческая)
- Синхронизация (Синхроные / Асинхронные)
- Топлогия (Точка-точка, общая шина, цепочная)

### Организация
Физические интерфейсы:
- последовательные
- паралельные 
- последовательно-паралельные
Логически организация включает в себя 
- Абитраж (С одним и несколькими задатчиками)
- Состояние
- Адресацию
- Систему команд
- Формат данных (Котроль ошибок, пакетность)

### Синхронизация:

- Синхронные
  Привязаны к синх сигналу
- Асинхронные
  Физическая синхронизация осуществляется по данным
  Включают в себя: Рукопожатие, квитирование
- Изохронные
  Передача с квитированием

### Топлогия

- точка-точка
  + Без адресации
  + Простой арбитраж
- Общая шина
  - Адресация
  + Возможность расширения
- Цепочная
  + Возможность построения сложных систем
  - Сложная физическая и логическая организация

Наблюдается переход от паралелльных к последовательным интерфейсам
PCI -> PCI Express
ATA -> Serial ATA
LPT -> USB


# Проектирование ПО встроенных систем

Разделяются на:
- Без требований к времени ответа
- С нормированным ответом

СРВ - аппаратно-программный комлекс, реагирущий в предсказуемые времена на непредсказуемый поток внешних событий
- Система должна сформировать реакцияю на события в течение заданого промежутка времени
- Система доджна выполнять требования при любой возможной комбинации событий для каждого из них
- Отсутсвие реакции на слбитие в заданый срок - ощиюка
  
### Система жесткого реального времени
Задержка недопустима ни про каких условиях

### Система мягкого реального времени
Задержка допустима и не является ошибкой, но они снижает качество системы

